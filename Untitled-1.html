<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <title>يمكن ان تحدث العربي</title>
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https: data:; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline' https:; img-src 'self' data: https:; connect-src 'self' https://wa.me https://api.whatsapp.com https://web.whatsapp.com; frame-src https://web.whatsapp.com; font-src 'self' https: data:; object-src 'none';" />
    <style>
        body {
            background: url('https://via.placeholder.com/1920x1080') no-repeat center center fixed;
            background-size: cover;
            font-family: 'Cairo', Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding-top: 70px; /* مساحة لأن شريط التنقل ثابت */
            transition: background-color 0.3s ease;
        }
        h1 {
            color: #333;
            background: #fff8;
            padding: 20px 40px;
            border-radius: 20px;
            box-shadow: 0 4px 16px #0002;
            margin-bottom: 30px;
            transition: color 0.3s ease, background 0.3s ease;
        }
        .products {
            display: flex;
            gap: 30px;
            margin-top: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }
        /* عندما نضع عنوان فئة داخل .products نريد أن يكون بعرض كامل */
        .products > h2 {
            width: 100%;
            text-align: right;
            margin: 0 10px 10px 10px;
            flex-basis: 100%;
        }
        .product {
            background: #fff8;
            border-radius: 18px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);
            padding: 25px 20px 20px 20px;
            text-align: center;
            width: 180px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }
        .product:hover {
            transform: translateY(-10px) scale(1.06);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
        }
        .product img {
            width: 70px;
            height: 70px;
            margin-bottom: 12px;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        .product:hover img {
            transform: scale(1.1);
        }
        .product h2 {
            font-size: 1.3em;
            margin: 12px 0 6px 0;
            color: #185a9d;
            transition: color 0.3s ease;
        }
        .product:hover h2 {
            color: #3bb78f;
        }
        .product p {
            margin: 0 0 12px 0;
            color: #333;
        }
        .cart {
            background: #fff8;
            border-radius: 18px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);
            padding: 25px 20px 20px 20px;
            margin-top: 40px;
            width: 100%;
            max-width: 600px;
            direction: rtl;
            transition: box-shadow 0.3s ease;
        }
        .cart table {
            width: 100%;
            border-collapse: collapse;
        }
        .cart th, .cart td {
            padding: 8px 5px;
            border-bottom: 1px solid #ccc;
            text-align: center;
        }
        .cart th {
            background: #43cea2;
            color: #fff;
            border-radius: 8px 8px 0 0;
            transition: background 0.3s ease;
        }
        .cart button {
            padding: 3px 10px;
            font-size: 1em;
            border-radius: 8px;
            margin: 0 2px;
            background: #185a9d;
            color: #fff;
            border: none;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        .cart button:hover {
            background: #43cea2;
        }
        .contact {
            background: #fff8;
            border-radius: 18px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);
            padding: 25px 20px 20px 20px;
            margin: 40px auto 20px auto;
            max-width: 400px;
            width: 100%;
            text-align: center;
            transition: box-shadow 0.3s ease;
        }
        .contact input, .contact textarea {
            width: 90%;
            padding: 8px;
            margin: 8px 0;
            border-radius: 8px;
            border: 1px solid #ccc;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }
        .contact input:focus, .contact textarea:focus {
            border-color: #3bb78f;
            outline: none;
        }
        .contact button {
            background: #43cea2;
            color: #fff;
            border: none;
            padding: 10px 30px;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            margin-top: 10px;
            transition: background 0.3s ease;
        }
        .contact button:hover {
            background: #185a9d;
        }
        .add-product {
            margin: 20px auto;
            max-width: 400px;
            background: #fff8;
            border-radius: 18px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);
            padding: 25px 20px;
            text-align: center;
            transition: box-shadow 0.3s ease;
        }
        .add-product input {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border-radius: 8px;
            border: 1px solid #ccc;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }
        .add-product input:focus {
            border-color: #3bb78f;
            outline: none;
        }
        .add-product button {
            padding: 10px 20px;
            background: #43cea2;
            color: #fff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        .add-product button:hover {
            background: #185a9d;
        }
        /* إضافة أنماط لقائمة التنقل */
        nav {
            width: 100%;
            position: fixed;
            top: 0;
            left: 0;
            background: #43cea2;
            padding: 10px 0;
            text-align: center;
            z-index: 1000;
            overflow-x: auto;
            white-space: nowrap;
        }
        nav a {
            margin: 0 15px;
            color: #fff;
            text-decoration: none;
            font-size: 1.1em;
            display: inline-block;
            padding: 8px 10px;
            white-space: nowrap;
        }
        nav a:hover {
            color: #000;
        }
        /* إضافة أنماط لصفحة الدفع */
        .payment {
            margin: 20px auto;
            max-width: 400px;
            text-align: center;
            transition: color 0.3s ease;
        }
        .wa-contact {
            display: inline-block;
            margin-right: 10px;
            padding: 6px 10px;
            background: #25D366;
            color: #fff;
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            transition: background 0.3s ease;
        }
        .wa-contact:hover {
            background: #128C7E;
        }
        /* أنماط النافذة المنبثقة */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal-content {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            width: 80%;
            max-width: 400px;
        }

        /* تحسين تجاوب التصميم مع الشاشات المختلفة */
        @media (max-width: 1024px) {
            .products {
                gap: 20px;
            }
            .product {
                width: 150px;
                padding: 20px 15px 15px 15px;
            }
            .product img {
                width: 60px;
                height: 60px;
                margin-bottom: 10px;
            }
            .product h2 {
                font-size: 1.1em;
            }
            .product p {
                font-size: 0.95em;
            }
            nav a {
                margin: 0 12px;
                font-size: 1em;
            }
        }

        @media (max-width: 768px) {
            body {
                padding-top: 90px;
            }
            .products {
                gap: 15px;
            }
            .product {
                width: 130px;
                padding: 15px 12px 12px 12px;
            }
            .product img {
                width: 50px;
                height: 50px;
            }
            .product h2 {
                font-size: 1em;
            }
            .product p {
                font-size: 0.9em;
            }
            nav a {
                margin: 0 8px;
                font-size: 0.95em;
                padding: 6px 8px;
            }
            .cart {
                max-width: 100%;
                padding: 15px 10px 10px 10px;
            }
            .contact, .add-product, .payment {
                max-width: 95%;
                padding: 20px 15px 15px 15px;
            }
            .contact input, .contact textarea,
            .add-product input {
                width: 100%;
            }
            .cart button {
                padding: 5px 8px;
                font-size: 0.9em;
            }
            .cart th, .cart td {
                padding: 6px 3px;
            }
        }

        @media (max-width: 480px) {
            .products {
                flex-direction: column;
                gap: 12px;
            }
            .product {
                width: 100%;
                max-width: 320px;
                padding: 12px 10px 10px 10px;
                margin: auto;
            }
            .product img {
                width: 48px;
                height: 48px;
            }
            .product h2 {
                font-size: 0.95em;
            }
            .product p {
                font-size: 0.85em;
            }
            nav a {
                font-size: 0.9em;
                margin: 0 6px;
                padding: 5px 6px;
            }
        }
    </style>
</head>
<body>
    <!-- إضافة قائمة تنقل -->
    <nav>
        <a href="#main-products">الرئيسية</a>
        <a href="#snacks-section">سناكس</a>
        <a href="#drinks-section">مشروبات</a>
        <a href="#dairy-section">ألبان</a>
        <a href="#payment-section">الدفع</a>
    </nav>
    <h1>بقالة الزعيم</h1>
    <div style="width:100%; max-width:1000px; display:flex; justify-content:flex-end; padding:0 20px 10px 20px; box-sizing:border-box;">
        <button onclick="clearCart()" style="padding:8px 12px; border-radius:8px; background:#e74c3c; color:#fff; border:none; cursor:pointer;">تفريغ السلة</button>
        <button id="adminBtn" onclick="promptAdmin()" style="margin-right:8px; padding:8px 12px; border-radius:8px; background:#444; color:#fff; border:none; cursor:pointer;">Admin</button>
        <button id="adminLogoutBtn" onclick="logoutAdmin()" style="display:none; margin-right:8px; padding:8px 12px; border-radius:8px; background:#888; color:#fff; border:none; cursor:pointer;">خروج Admin</button>
    </div>
    <!-- رابط الموقع المحلي ونسخ الرابط -->
    <div style="width:100%; max-width:1000px; display:flex; justify-content:flex-end; padding:0 20px 10px 20px; box-sizing:border-box; gap:8px;">
        <div style="background:#fff8; padding:8px 12px; border-radius:8px; align-self:center;">
            <strong>رابط العرض المحلي:</strong>
            <a id="localSiteLink" href="http://localhost:8000/Untitled-2.html" target="_blank" style="margin-right:8px;">http://localhost:8000/Untitled-2.html</a>
            <button onclick="(function(){ const u = (location.href && location.protocol.startsWith('http')) ? location.href : 'http://localhost:8000/Untitled-2.html'; navigator.clipboard.writeText(u).then(()=>alert('تم نسخ الرابط للحافظة')) .catch(()=>{ prompt('انسخ هذا الرابط يدوياً:', u); }); })()" style="padding:6px 10px; border-radius:8px; background:#185a9d; color:#fff; border:none; cursor:pointer;">نسخ الرابط</button>
        </div>
    </div>
    <div id="main-products" class="products">
        <div class="product">
            <img src="https://cdn-icons-png.flaticon.com/512/3075/3075977.png" alt="خبز" />
            <h2>خبز</h2>
            <p>السعر: 5 جنيه</p>
            <button onclick="addToCart('خبز', 5)">أضف للسلة</button>
        </div>
        <div class="product">
            <img src="https://cdn-icons-png.flaticon.com/512/1046/1046857.png" alt="لبن" />
            <h2>لبن</h2>
            <p>السعر: 10 جنيه</p>
            <button onclick="addToCart('لبن', 10)">أضف للسلة</button>
        </div>
        <div class="product">
            <img src="https://cdn-icons-png.flaticon.com/512/135/135620.png" alt="سكر" />
            <h2>سكر</h2>
            <p>السعر: 8 جنيه</p>
            <button onclick="addToCart('سكر', 8)">أضف للسلة</button>
        </div>
    </div>
    <!-- إضافة قسم السناكس -->
    <div id="snacks-section" class="products">
        <h2>سناكس</h2>
        <div class="product">
            <img src="https://cdn-icons-png.flaticon.com/512/2490/2490570.png" alt="شيبسي صغير" />
            <h2>شيبسي صغير (14 جم)</h2>
            <p>السعر: 3 جنيه</p>
            <button onclick="addToCart('شيبسي صغير (14 جم)', 3)">أضف للسلة</button>
        </div>
        <div class="product">
            <img src="https://cdn-icons-png.flaticon.com/512/2490/2490570.png" alt="شيبسي عائلي" />
            <h2>شيبسي عائلي (26 جم)</h2>
            <p>السعر: 5 جنيهات</p>
            <button onclick="addToCart('شيبسي عائلي (26 جم)', 5)">أضف للسلة</button>
        </div>
        <div class="product">
            <img src="https://cdn-icons-png.flaticon.com/512/2490/2490570.png" alt="شيبسي عائلي أكبر" />
            <h2>شيبسي عائلي أكبر (42 جم)</h2>
            <p>السعر: 7 جنيهات</p>
            <button onclick="addToCart('شيبسي عائلي أكبر (42 جم)', 7)">أضف للسلة</button>
        </div>
        <div class="product">
            <img src="https://cdn-icons-png.flaticon.com/512/2490/2490570.png" alt="شيبسي سوبر جامبو" />
            <h2>شيبسي سوبر جامبو (65 جم)</h2>
            <p>السعر: 10 جنيهات</p>
            <button onclick="addToCart('شيبسي سوبر جامبو (65 جم)', 10)">أضف للسلة</button>
        </div>
        <div class="product">
            <img src="https://cdn-icons-png.flaticon.com/512/2490/2490570.png" alt="شيبسي حجم كبير" />
            <h2>شيبسي حجم كبير جدًا (140 جم)</h2>
            <p>السعر: 20 جنيهًا</p>
            <button onclick="addToCart('شيبسي حجم كبير جدًا (140 جم)', 20)">أضف للسلة</button>
        </div>
        <div class="product">
            <img src="https://cdn-icons-png.flaticon.com/512/1046/1046857.png" alt="دوريتوس 28 جم" />
            <h2>دوريتوس 28 جم</h2>
            <p>السعر: 5 جنيهات</p>
            <button onclick="addToCart('دوريتوس 28 جم', 5)">أضف للسلة</button>
        </div>
        <div class="product">
            <img src="https://cdn-icons-png.flaticon.com/512/1046/1046857.png" alt="دوريتوس 45 جم" />
            <h2>دوريتوس 45 جم</h2>
            <p>السعر: 7 جنيهات</p>
            <button onclick="addToCart('دوريتوس 45 جم', 7)">أضف للسلة</button>
        </div>
        <div class="product">
            <img src="https://cdn-icons-png.flaticon.com/512/1046/1046857.png" alt="دوريتوس 70 جم" />
            <h2>دوريتوس 70 جم</h2>
            <p>السعر: 10 جنيهات</p>
            <button onclick="addToCart('دوريتوس 70 جم', 10)">أضف للسلة</button>
        </div>
    </div>
    <div id="cart" class="cart"></div>
    <div class="contact">
        <h2>تواصل معنا</h2>
        <form onsubmit="sendMessage(event)">
            <input type="text" id="name" placeholder="اسمك" required />
            <br />
            <input type="email" id="email" placeholder="البريد الإلكتروني" required />
            <br />
            <textarea id="msg" placeholder="رسالتك" rows="4" required></textarea>
            <br />
            <button type="submit">إرسال</button>
        </form>
        <div id="contact-result" style="margin-top: 10px; color: #185a9d;"></div>
        <p>
            للتواصل عبر الواتساب:
            <a href="https://wa.me/201070274572" target="_blank">01070274572</a>
            <a class="wa-contact" href="https://wa.me/201070274572" target="_blank">كلمنا للتواصل</a>
        </p>
    </div>
    <!-- إضافة نموذج لإدخال المنتجات -->
    <div id="add-product" class="add-product" style="display: none">
        <h2>إضافة منتج جديد</h2>
        <form id="productForm" onsubmit="addNewProduct(event)">
            <input type="text" id="productName" placeholder="اسم المنتج" required />
            <input type="number" id="productPrice" placeholder="السعر" required />
            <input type="text" id="productImage" placeholder="رابط الصورة" />
            <button type="submit">إضافة المنتج</button>
        </form>
    </div>
    <!-- إضافة قسم الدفع -->
    <div id="payment-section" class="payment">
        <h2>طرق الدفع</h2>
        <p>فودافون كاش: <b>01070274572</b></p>
        <p>إنستا باي: <b>123456789012345</b></p>
    </div>
    <!-- صفحة تأكيد الطلب -->
    <div
        id="confirm-section"
        style="display: none; max-width: 600px; margin: 20px auto; background: #fff8; border-radius: 12px; padding: 20px; box-shadow: 0 4px 16px #0001; text-align: right"
    >
        <h2>تأكيد الطلب</h2>
        <div id="confirm-lines" style="white-space: pre-wrap; text-align: right; margin-bottom: 12px"></div>
        <div id="confirm-total" style="font-weight: bold; margin-bottom: 12px"></div>
        <div style="margin-bottom: 12px; text-align: right">
            <div style="margin-bottom: 6px">
                <strong>عنوان المتجر:</strong><br /><span id="store-address">المساكن اخر شارع البنك الاهلي عمارات ال رضوان</span>
            </div>
            <div>
                العنوان الذي يكتبه العميل (من فضلك أدخل عنوان التوصيل):<br />
                <textarea
                    id="customer-address"
                    rows="2"
                    style="width: 100%; padding: 8px; border-radius: 6px; border: 1px solid #ccc; margin-top: 6px"
                    placeholder="عنوان التوصيل..."
                ></textarea>
            </div>
        </div>
        <div style="margin-bottom: 8px; text-align: right">
            <label for="confirm-customer-name">الاسم:</label><br />
            <input
                id="confirm-customer-name"
                type="text"
                placeholder="اسمك"
                style="width: 100%; padding: 8px; border-radius: 6px; border: 1px solid #ccc; margin-top: 6px"
            />
        </div>
        <div style="margin-bottom: 8px; text-align: right">
            <label for="confirm-customer-phone">رقم الهاتف (واتساب):</label><br />
            <input
                id="confirm-customer-phone"
                type="tel"
                placeholder="01012345678"
                style="width: 100%; padding: 8px; border-radius: 6px; border: 1px solid #ccc; margin-top: 6px"
            />
        </div>
        <div style="display: flex; gap: 8px; justify-content: center; margin-top: 10px">
            <button
                onclick="sendWhatsAppFromConfirm()"
                style="padding: 8px 12px; border-radius: 8px; background: #27ae60; color: #fff; border: none; cursor: pointer"
            >
                إرسال عبر واتساب
            </button>
            <button
                onclick="hideConfirm()"
                style="padding: 8px 12px; border-radius: 8px; background: #aaa; color: #fff; border: none; cursor: pointer"
            >
                تعديل السلة
            </button>
        </div>
    </div>
    <!-- إضافة نافذة منبثقة (Modal) -->
    <div
        id="myModal"
        class="modal"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); justify-content: center; align-items: center; z-index: 1000"
    >
        <div
            class="modal-content"
            style="background: #fff; padding: 20px; border-radius: 10px; text-align: center; width: 80%; max-width: 400px"
        >
            <h2>محتوى النافذة</h2>
            <p>هذا مثال على نافذة منبثقة داخل الصفحة.</p>
            <button
                onclick="closeModal()"
                style="padding: 10px 20px; background: #43cea2; color: #fff; border: none; border-radius: 8px; cursor: pointer"
            >
                إغلاق
            </button>
        </div>
    </div>

    <!-- زر فتح النافذة -->
    <div style="text-align: center; margin: 20px;">
        <button
            onclick="openModal()"
            style="padding: 10px 20px; background: #185a9d; color: #fff; border: none; border-radius: 8px; cursor: pointer"
        >
            فتح النافذة
        </button>
    </div>

    <script>
        // JavaScript code for cart and other interactions (same as before) ...
        // To save space here, the JavaScript functionality remains unchanged as from the previous version
    </script>
</body>
</html>
